<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>黒焔の迷宮 - Diablo Style Hack & Slash</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="titleScreen">
        <h1>黒焔の迷宮</h1>
        <h2>DUNGEON OF BLACK FLAME</h2>
        <div id="classSelect" style="display:none;width:100%;max-width:900px;margin:0 auto">
            <div style="text-align:center;color:#daa520;font-size:16px;margin-bottom:20px;letter-spacing:3px">─ ← → でクラスを選択　Enter で決定 ─</div>
            <div style="display:flex;gap:20px;justify-content:center">
                <div class="class-card" onclick="selectClass('warrior')">
                    <div class="class-icon">⚔</div>
                    <div class="class-name">戦士</div>
                    <div class="class-eng">WARRIOR</div>
                    <div class="class-desc">近接戦闘の達人。高い体力と筋力で敵をなぎ倒す。重装備を得意とし、前線で戦う。</div>
                    <div class="class-stats">STR ★★★ DEX ★☆☆ VIT ★★★ INT ★☆☆</div>
                </div>
                <div class="class-card" onclick="selectClass('rogue')">
                    <div class="class-icon">🏹</div>
                    <div class="class-name">盗賊</div>
                    <div class="class-eng">ROGUE</div>
                    <div class="class-desc">素早さと精密な射撃で戦う。罠を仕掛け、敵の弱点を突く。回避に優れる。</div>
                    <div class="class-stats">STR ★☆☆ DEX ★★★ VIT ★★☆ INT ★★☆</div>
                </div>
                <div class="class-card" onclick="selectClass('sorcerer')">
                    <div class="class-icon">🔮</div>
                    <div class="class-name">魔法使い</div>
                    <div class="class-eng">SORCERER</div>
                    <div class="class-desc">強力な魔法を操る。炎、雷、氷の魔法で遠距離から殲滅する。MPが豊富。</div>
                    <div class="class-stats">STR ★☆☆ DEX ★☆☆ VIT ★☆☆ INT ★★★</div>
                </div>
            </div>
        </div>
        <div id="titleStartText" class="start-text" style="margin-top:30px">― Enter / クリックで選択スロット開始 ―</div>
        <div id="titleSaveMenu">
            <div style="text-align:center;color:#ddb27a;font-size:12px;margin-bottom:6px;letter-spacing:2px">セーブスロット</div>
            <div id="titleSaveContent"></div>
        </div>
    </div>

    <!-- Promotion Overlay -->
    <div id="promotionOverlay">
        <div id="promotionContent"></div>
    </div>

    <!-- Skill Select Overlay -->
    <div id="skillSelectOverlay">
        <div id="skillSelectContent"></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="statsPanel" class="ui-panel">
        <div class="panel-header">⚔ キャラクター</div>
        <div id="statsContent"></div>
    </div>
    <div id="inventoryPanel" class="ui-panel">
        <div class="panel-header">🎒 インベントリ</div>
        <div id="inventoryContent"></div>
    </div>
    <div id="tooltip"></div>
    <div id="logPanel"></div>
    <div id="levelUpNotice">LEVEL UP!</div>
    <div id="deathScreen">
        <h1>YOU DIED</h1>
        <p>Enter / クリックで復活...</p>
    </div>
    <div id="controls-help">
        矢印:移動 | 左クリック:攻撃 | 右クリック:スキル | A:攻撃 | S:スキル | Q:HP薬 | W:MP薬 | 1~6:スキル選択 | Space:拾う | I:装備 | C:キャラ | T:ツリー | R:S編集 | H:手引書
    </div>
    <button id="skillEditBtn" class="toggle-btn" tabindex="-1" style="position:fixed;left:50%;bottom:96px;transform:translateX(-50%);z-index:300;opacity:0.9">
        スキル編集 (R)
    </button>

    <div id="helpOverlay" class="ui-panel" style="top:50%;left:50%;transform:translate(-50%,-50%);width:600px;max-height:85vh;display:none">
        <div class="panel-header">📖 冒険者の手引書 (H で閉じる)</div>
        <div id="helpTabs" style="display:flex;gap:2px;margin-bottom:8px;flex-wrap:wrap"></div>
        <div id="helpContent" style="line-height:1.7;font-size:12px;overflow-y:auto;max-height:calc(85vh - 90px)"></div>
    </div>

    <div id="settingsPanel" class="ui-panel" style="top:50%;left:50%;transform:translate(-50%,-50%);width:420px;max-height:80vh;display:none">
        <div class="panel-header">⚙ 設定 (O で閉じる)</div>
        <div id="settingsContent"></div>
    </div>

    <div id="pauseOverlay">
        <div class="pause-card">
            <div class="pause-title">PAUSED</div>
            <div class="pause-sub">Esc で再開 | O で設定</div>
        </div>
    </div>

    <div id="skillTreePanel">
        <div class="panel-header">🌳 スキルツリー (T で閉じる)</div>
        <div id="skillTreeContent"></div>
    </div>

    <!-- Town UI Panels -->
    <div id="dialogPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="shopPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="blacksmithPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="gamblePanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="stashPanel" class="ui-panel town-panel" style="display:none;width:520px"></div>
    <div id="waypointPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="questPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="uberPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="mercenaryPanel" class="ui-panel town-panel" style="display:none"></div>
    <div id="gamblingPanel" class="ui-panel town-panel" style="display:none"></div>

    <!-- Data -->
    <script src="js/data.js"></script>
    <script src="js/sprites.js"></script>
    <script src="js/audio.js"></script>
    <!-- Systems -->
    <script src="js/effects.js"></script>
    <script src="js/dungeon.js"></script>
    <script src="js/items.js"></script>
    <script src="js/player.js"></script>
    <script src="js/entities.js"></script>
    <script src="js/town.js"></script>
    <!-- UI & Game -->
    <script src="js/ui.js"></script>
    <script src="js/save.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
